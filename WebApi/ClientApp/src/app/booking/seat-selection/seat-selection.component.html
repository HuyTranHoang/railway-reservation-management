<h2>Seat selection</h2>
<div class="horizontal-divider"></div>

<div class="panel">
  <div class="text-center item">
    <p class="big-text bold" style="text-transform: capitalize">
      Soft seat Premium </p>
  </div>

  <div class="row my-5">
    <div class="col-2 offset-3 d-flex flex-column align-items-center">
      <div class="d-flex">
        <button class="seat seat-available seat-available-sample"></button>

        <div class="bed-border d-flex">
          <div>
            <button class="bed bed-available bed-available-sample"></button>
            <div class="bed-illustration"></div>
          </div>
        </div>
      </div>
      <div>
        Available
      </div>
    </div>

    <div class="col-2 d-flex flex-column align-items-center">
      <div class="d-flex">
        <button class="seat seat-selected seat-selected-sample"></button>

        <div class="bed-border d-flex">
          <div>
            <button class="bed bed-selected bed-selected-sample"></button>
            <div class="bed-illustration"></div>
          </div>
        </div>
      </div>
      <div>
        Selected
      </div>
    </div>

    <div class="col-2 d-flex flex-column align-items-center">
      <div class="d-flex">
        <button class="seat seat-unavailable seat-unavailable-sample"></button>

        <div class="bed-border d-flex">
          <div>
            <button class="bed bed-unavailable bed-unavailable-sample"></button>
            <div class="bed-illustration"></div>
          </div>
        </div>
      </div>
      <div>
        Sold out
      </div>
    </div>

    <div class="col-2 offset-3 d-flex flex-column align-items-center mt-4">
      <div class="car-icon car-icon-available">
        <img src="https://dsvn.vn/images/trainCar2.png">
      </div>
      <span>
          Has tickets
      </span>
    </div>

    <div class="col-2 d-flex flex-column align-items-center mt-4">
      <div class="car-icon car-icon-selected">
        <img src="https://dsvn.vn/images/trainCar2.png">
      </div>
      <span>
          Currently selected
      </span>
    </div>

    <div class="col-2 d-flex flex-column align-items-center mt-4">
      <div class="car-icon car-icon-sold-out">
        <img src="https://dsvn.vn/images/trainCar2.png">
      </div>
      <span>
        Ticket is sold out
      </span>
    </div>

    <div class="horizontal-divider my-5"></div>

    <div class="d-flex flex-column align-items-center justify-content-center">
      <div class="d-flex align-items-center justify-content-center">
<!--        <div class="car-block">-->
<!--          <div class="car-icon car-icon-sold-out">-->
<!--            <img src="https://dsvn.vn/images/trainCar2.png">-->
<!--          </div>-->
<!--          <div class="text-center text-info car-label">3</div>-->
<!--        </div>-->

<!--        <div class="car-block">-->
<!--          <div class="car-icon car-icon-selected">-->
<!--            <img src="https://dsvn.vn/images/trainCar2.png">-->
<!--          </div>-->
<!--          <div class="text-center text-info car-label">2</div>-->
<!--        </div>-->

        <div class="car-block">
          <div class="car-icon" style="transform: rotate(-180deg) scaleY(-1);">
            <img src="https://dsvn.vn/images/train2.png">
          </div>
          <div class="text-center text-info car-label">
            {{trainDetail?.name}}
          </div>
        </div>

        <div class="car-block"
             (click)="selectCarriage(item)"
             *ngFor="let item of carriageMatchType; let i = index">
          <div class="car-icon"
               [ngClass]="item.id == currentSelectCarriage?.id ? 'car-icon-selected' : 'car-icon-available'">
            <img src="https://dsvn.vn/images/trainCar2.png">
          </div>
          <div class="text-center text-info car-label">{{i+1}}</div>
        </div>
      </div>

      <!--Ghế mềm-->
      <section class="seat-floor"
               *ngIf="bookingService.currentSelectSchedule?.selectedCarriageType?.id == 1">
        <div class="d-flex">
          <div *ngIf="compartmentOfCarriage && compartmentOfCarriage[0] && compartmentOfCarriage[0].seats">
            <div class="seat-row">
              <button class="seat"
                      [ngClass]="seat.booked ? 'seat-unavailable' : 'seat-available'"
                      (click)="toggleSelectSeat(seat)"
                      [class.seat-selected]="seat.selected"
                      *ngFor="let seat of seatRows[0]">
                {{ seat.name }}
              </button>
            </div>

            <div class="seat-row mt-1">
              <button class="seat seat-available"
                      [ngClass]="seat.booked ? 'seat-unavailable' : 'seat-available'"
                      (click)="toggleSelectSeat(seat)"
                      [class.seat-selected]="seat.selected"
                      *ngFor="let seat of seatRows[1]">
                {{ seat.name }}
              </button>
            </div>

          </div>
          <div class="seat-separator"></div>
          <div *ngIf="compartmentOfCarriage && compartmentOfCarriage[1] && compartmentOfCarriage[1].seats">
            <div class="seat-row">
              <div class="seat-row">
                <button class="seat seat-available"
                        [ngClass]="seat.booked ? 'seat-unavailable' : 'seat-available'"
                        (click)="toggleSelectSeat(seat)"
                        [class.seat-selected]="seat.selected"
                        *ngFor="let seat of seatRows[4]">
                  {{ seat.name }}
                </button>
              </div>
            </div>
            <div class="seat-row mt-1">
              <div class="seat-row">
                <button class="seat seat-available"
                        [ngClass]="seat.booked ? 'seat-unavailable' : 'seat-available'"
                        (click)="toggleSelectSeat(seat)"
                        [class.seat-selected]="seat.selected"
                        *ngFor="let seat of seatRows[5]">
                  {{ seat.name }}
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex mt-4">
          <div *ngIf="compartmentOfCarriage && compartmentOfCarriage[0] && compartmentOfCarriage[0].seats">
            <div class="seat-row">
              <button class="seat seat-available"
                      [ngClass]="seat.booked ? 'seat-unavailable' : 'seat-available'"
                      (click)="toggleSelectSeat(seat)"
                      [class.seat-selected]="seat.selected"
                      *ngFor="let seat of seatRows[2]">
                {{ seat.name }}
              </button>
            </div>
            <div class="seat-row mt-1">
              <button class="seat seat-available"
                      [ngClass]="seat.booked ? 'seat-unavailable' : 'seat-available'"
                      (click)="toggleSelectSeat(seat)"
                      [class.seat-selected]="seat.selected"
                      *ngFor="let seat of seatRows[3]">
                {{ seat.name }}
              </button>
            </div>
          </div>
          <div class="seat-separator"></div>
          <div *ngIf="compartmentOfCarriage && compartmentOfCarriage[1] && compartmentOfCarriage[1].seats">
            <div class="seat-row">
              <button class="seat seat-available"
                      [ngClass]="seat.booked ? 'seat-unavailable' : 'seat-available'"
                      (click)="toggleSelectSeat(seat)"
                      [class.seat-selected]="seat.selected"
                      *ngFor="let seat of seatRows[6]">
                {{ seat.name }}
              </button>
            </div>
            <div class="seat-row mt-1">
              <button class="seat seat-available"
                      [ngClass]="seat.booked ? 'seat-unavailable' : 'seat-available'"
                      (click)="toggleSelectSeat(seat)"
                      [class.seat-selected]="seat.selected"
                      *ngFor="let seat of seatRows[7]">
                {{ seat.name }}
              </button>
<!--              <button class="seat seat-available"-->
<!--                      [class.seat-selected]="seatStatus[7][colIndex]"-->
<!--                      (click)="toggleSeat(7, colIndex)"-->
<!--                      *ngFor="let seat of seatRows[7]; let colIndex = index">-->
<!--                {{ seat }}-->
<!--              </button>-->
            </div>
          </div>
        </div>
      </section>

      <!--Giường 4 khoang-->

      <section *ngIf="bookingService.currentSelectSchedule?.selectedCarriageType?.id == 2"
               class="seat-floor d-flex align-items-end">

        <div class="d-flex flex-column mt-2" *ngIf="currentSelectCarriage?.compartments">
          <button class="btn">
            T2
          </button>
          <button class="btn">
            T1
          </button>
        </div>
        <div class="bed-outer" *ngFor="let item of currentSelectCarriage?.compartments; let i = index">
          <label class="label w-100 text-center">Khoang {{i + 1}}</label>
          <div class="bed-border d-flex">
            <div>
              <button class="bed"
                      (click)="toggleSelectSeat(item.seats[1])"
                      [class.seat-selected]="item.seats[1].selected"
                      [ngClass]="item.seats[1].booked ? 'seat-unavailable' : 'seat-available'">
                {{item.seats[1].name}}</button>
              <div class="bed-illustration"></div>
            </div>
            <div class="ml-2">
              <button class="bed"
                      (click)="toggleSelectSeat(item.seats[3])"
                      [class.seat-selected]="item.seats[3].selected"
                      [ngClass]="item.seats[3].booked ? 'seat-unavailable' : 'seat-available'">
                {{item.seats[3].name}}</button>
              <div class="bed-illustration"></div>
            </div>
          </div>

          <div class="bed-border d-flex">
            <div>
              <button class="bed"
                      (click)="toggleSelectSeat(item.seats[0])"
                      [class.seat-selected]="item.seats[0].selected"
                      [ngClass]="item.seats[0].booked ? 'seat-unavailable' : 'seat-available'">
                {{item.seats[0].name}}</button>
              <div class="bed-illustration"></div>
            </div>
            <div class="ml-2">
              <button class="bed"
                      (click)="toggleSelectSeat(item.seats[2])"
                      [class.seat-selected]="item.seats[2].selected"
                      [ngClass]="item.seats[2].booked ? 'seat-unavailable' : 'seat-available'">
                {{item.seats[2].name}}</button>
              <div class="bed-illustration"></div>
            </div>
          </div>
        </div>
      </section>
    </div>

  </div>
</div>

<div class="panel" style="border-left: 3px solid #5bc0de;">
  <div class="d-flex align-items-center">
    <img class="me-3" style="width: 30px" src="https://booking.baolau.com/images/icons/avatar-baolau.png" alt="avatar">
    <h6 style="line-height: 30px; font-size: 18px; margin: 0">
      Seat position not guaranteed
    </h6>
  </div>
  <div class="horizontal-divider"></div>
  <p class="mt-3 fst-italic">
    Please note that the position of the seats is just for reference. The railway operator may change the orientation of the carriage at the departure station anytime at their convenience. We hope you understand that this situation escapes our control and we cannot guarantee that the position of your seat will be the same as you select here.
  </p>
</div>

<div class="mt-3 mb-5">
  <a class="btn green w-100" routerLink="/booking/passengers">
    <span class="bold">CONTINUE</span>
  </a>
</div>

<pre>
  currentBookingScheduleParams
  {{ bookingService.currentBookingScheduleParams | json }}
  ----------------
  currentSelectSchedule
  {{ bookingService.currentSelectSchedule | json }}
  ----------------
  trainDetail
  {{ trainDetail | json }}
  ----------------
  carriageMatchType
  {{ carriageMatchType | json }}
  ----------------
  currentSelectCarriage
  {{ currentSelectCarriage | json }}
  ----------------
  compartmentOfCarriage
  {{ compartmentOfCarriage | json }}
  ----------------
  selectedSeat
  {{ selectedSeat | json }}
</pre>
