<nb-card>
  <nb-card-header>Define New Carriage</nb-card-header>
  <nb-card-body>
    <nb-stepper orientation="horizontal" disableStepNavigation>

<!--      <nb-step [label]="labelOne" [stepControl]="carriageForm">-->
        <nb-step [label]="labelOne">
        <ng-template #labelOne>First step</ng-template>
        <h4>Define New Carriage</h4>

        <form [formGroup]="carriageForm" class="my-4 col-6 p-0">

          <div class="form-group">
            <label class="label">Train name/code</label>
            <input #autoInput
                   class="mr-4"
                   [class.status-danger]="isSubmitted && !isValidTrainSelected"
                   nbInput
                   fullWidth
                   type="text"
                   (input)="onChange()"
                   (blur)="onInputBlur()"
                   placeholder="Choose train name/code.."
                   [nbAutocomplete]="autoTrainName" />
            <nb-autocomplete #autoTrainName (selectedChange)="onSelectionChange($event)">
              <nb-option *ngFor="let option of filteredOptions$ | async" [value]="option">
                {{ option.name }}
              </nb-option>
            </nb-autocomplete>
            <span *ngIf="isSubmitted && !isValidTrainSelected" class="text-danger">
              *Please select a valid train
            </span>
          </div>

          <div class="form-group">
            <label class="label">Carriage Type</label>
            <nb-select fullWidth formControlName="carriageTypeId"
                       [class.status-danger]="carriageForm.get('carriageTypeId').hasError('required') && isSubmitted"
                       placeholder="Type of this carriage..">
              <nb-option *ngFor="let option of carriageTypes" [value]="option.id">{{ option.name }}</nb-option>
            </nb-select>
            <span class="text-danger"
              *ngIf="carriageForm.get('carriageTypeId').hasError('required') && isSubmitted">
                *Please select a valid carriage type
              </span>
          </div>

          <app-input-field [control]="carriageForm.get('name')"
                           [label]="'Name'"
                           [isSubmitted]="isSubmitted"
                           [placeholder]="'Name of carriage..'">
          </app-input-field>

          <app-input-field [control]="carriageForm.get('numberOfCompartments')"
                           [label]="'Number of Compartments'"
                           [isSubmitted]="isSubmitted"
                           [placeholder]="'Number of compartments for this carriage'">
          </app-input-field>

        </form>

        <div *ngIf="isSubmitted && carriageForm.invalid" class="mb-3">
          <span class="text-danger">*Please fill the valid form to continue</span>
        </div>

        <button class="prev-button" nbButton disabled nbStepperNext>prev</button>
        <button class="next-button" nbButton nbStepperNext (click)="firstNextBtnClick()">next</button>
      </nb-step>

      <nb-step [label]="labelTwo">
        <ng-template #labelTwo>Second step</ng-template>
        <h4>Define compartment belong to this carriage</h4>
        <hr>
        <div class="row">
          <div class="col-4">
            <h6>Compartment #1</h6>
            <app-input-field [control]="compartmentForm.get('name')"
                             [label]="'Name'"
                             [isSubmitted]="isCompartmentSubmitted"
                             [placeholder]="'Name of compartment..'">
            </app-input-field>
            <app-input-field [control]="compartmentForm.get('numberOfSeats')"
                             [label]="'Number Of Seats'"
                             [isSubmitted]="isCompartmentSubmitted"
                             [placeholder]="'Number of seats..'">
            </app-input-field>
          </div>

          <div class="col-6" style="margin-top: 32px">
            <label class="label">Choose compartment template</label>
            <div>
              <button class="mr-3 status-primary" nbButton size="small">#1</button>
              <button class="mr-3" nbButton size="small">#2</button>
              <button class="mr-3" nbButton size="small">#3</button>
              <button class="mr-3" nbButton size="small">#4</button>
              <button class="mr-3" nbButton size="small">#5</button>
            </div>
            <div class="mt-3">
              <section class="seat-floor">
                <div class="d-flex">
                  <div>
                    <div class="seat-row">
                      <button class="seat seat-available">1</button>
                      <button class="seat seat-available">2</button>
                      <button class="seat seat-available">3</button>
                      <button class="seat seat-available">4</button>
                      <button class="seat seat-available">5</button>
                      <button class="seat seat-unavailable">6</button>
                      <button class="seat seat-unavailable">7</button>
                      <button class="seat seat-unavailable">8</button>
                    </div>
                    <div class="seat-row mt-1">
                      <button class="seat seat-unavailable">9</button>
                      <button class="seat seat-unavailable">10</button>
                      <button class="seat seat-unavailable">11</button>
                      <button class="seat seat-unavailable">12</button>
                      <button class="seat seat-unavailable">13</button>
                      <button class="seat seat-available">14</button>
                      <button class="seat seat-available">15</button>
                      <button class="seat seat-available">16</button>
                    </div>
                  </div>
                  <div class="seat-separator"></div>
                </div>

                <div class="d-flex mt-4">
                  <div>
                    <div class="seat-row">
                      <button class="seat seat-available">17</button>
                      <button class="seat seat-available">18</button>
                      <button class="seat seat-available">19</button>
                      <button class="seat seat-available">20</button>
                      <button class="seat seat-available">21</button>
                      <button class="seat seat-unavailable">22</button>
                      <button class="seat seat-unavailable">23</button>
                      <button class="seat seat-unavailable">24</button>
                    </div>
                    <div class="seat-row mt-1">
                      <button class="seat seat-unavailable">25</button>
                      <button class="seat seat-unavailable">26</button>
                      <button class="seat seat-unavailable">27</button>
                      <button class="seat seat-unavailable">28</button>
                      <button class="seat seat-unavailable">29</button>
                      <button class="seat seat-available">30</button>
                      <button class="seat seat-available">31</button>
                      <button class="seat seat-available">32</button>
                    </div>
                  </div>
                  <div class="seat-separator"></div>
                </div>
              </section>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-4">
            <h6>Compartment #2</h6>
            <app-input-field [control]="compartmentForm.get('name')"
                             [label]="'Name'"
                             [isSubmitted]="isCompartmentSubmitted"
                             [placeholder]="'Name of compartment..'">
            </app-input-field>
            <app-input-field [control]="compartmentForm.get('numberOfSeats')"
                             [label]="'Number Of Seats'"
                             [isSubmitted]="isCompartmentSubmitted"
                             [placeholder]="'Number of seats..'">
            </app-input-field>
          </div>

          <div class="col-6" style="margin-top: 32px">
            <label class="label">Choose compartment template</label>
            <div>
              <button class="mr-3 status-primary" nbButton size="small">#1</button>
              <button class="mr-3" nbButton size="small">#2</button>
              <button class="mr-3" nbButton size="small">#3</button>
              <button class="mr-3" nbButton size="small">#4</button>
              <button class="mr-3" nbButton size="small">#5</button>
            </div>
            <div class="mt-3">
              <section class="seat-floor">
                <div class="d-flex justify-content-end">
                  <div class="seat-separator"></div>
                  <div>
                    <div class="seat-row">
                      <button class="seat seat-available">1</button>
                      <button class="seat seat-available">2</button>
                      <button class="seat seat-available">3</button>
                      <button class="seat seat-available">4</button>
                      <button class="seat seat-available">5</button>
                      <button class="seat seat-unavailable">6</button>
                      <button class="seat seat-unavailable">7</button>
                      <button class="seat seat-unavailable">8</button>
                    </div>
                    <div class="seat-row mt-1">
                      <button class="seat seat-unavailable">9</button>
                      <button class="seat seat-unavailable">10</button>
                      <button class="seat seat-unavailable">11</button>
                      <button class="seat seat-unavailable">12</button>
                      <button class="seat seat-unavailable">13</button>
                      <button class="seat seat-available">14</button>
                      <button class="seat seat-available">15</button>
                      <button class="seat seat-available">16</button>
                    </div>
                  </div>
                </div>

                <div class="d-flex justify-content-end mt-4">
                  <div class="seat-separator"></div>
                  <div>
                    <div class="seat-row">
                      <button class="seat seat-available">17</button>
                      <button class="seat seat-available">18</button>
                      <button class="seat seat-available">19</button>
                      <button class="seat seat-available">20</button>
                      <button class="seat seat-available">21</button>
                      <button class="seat seat-unavailable">22</button>
                      <button class="seat seat-unavailable">23</button>
                      <button class="seat seat-unavailable">24</button>
                    </div>
                    <div class="seat-row mt-1">
                      <button class="seat seat-unavailable">25</button>
                      <button class="seat seat-unavailable">26</button>
                      <button class="seat seat-unavailable">27</button>
                      <button class="seat seat-unavailable">28</button>
                      <button class="seat seat-unavailable">29</button>
                      <button class="seat seat-available">30</button>
                      <button class="seat seat-available">31</button>
                      <button class="seat seat-available">32</button>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </div>
        </div>


        <button class="prev-button" nbButton nbStepperPrevious>prev</button>
        <button class="next-button" nbButton nbStepperNext>next</button>
      </nb-step>

      <nb-step label="Third step">
        <h4>Step content #3</h4>
        <p class="lorem">
          Lorizzle ipsum dolizzle stuff fizzle, consectetuer adipiscing break it down.
          Nullizzle sapien velizzle, my shizz pimpin', shizzle my nizzle crocodizzle shut the shizzle up,
          gravida vizzle, dang.
        </p>
        <button class="prev-button" nbButton nbStepperPrevious>prev</button>
        <button class="next-button" nbButton nbStepperNext>next</button>
      </nb-step>

      <nb-step [label]="labelFour">
        <ng-template #labelFour>Fourth step</ng-template>
        <h4>Step content #4</h4>
        <p class="lorem">
          Lorizzle ipsum dolizzle stuff fizzle, consectetuer adipiscing break it down.
          Nullizzle sapien velizzle, my shizz pimpin', shizzle my nizzle crocodizzle shut the shizzle up,
          gravida vizzle, dang.
        </p>
        <button class="prev-button" nbButton nbStepperPrevious>prev</button>
        <button class="next-button" nbButton disabled nbStepperNext>next</button>
      </nb-step>

    </nb-stepper>
  </nb-card-body>
</nb-card>
