<nb-card accent="info">
    <nb-card-header>
        <div class="d-flex justify-content-between align-items-center">
            <form class="position-relative" (ngSubmit)="onSearch()">
              <input nbInput placeholder="Search by name.."
                     name="searchTerm"
                     (keyup.escape)="onResetSearch()"
                     [(ngModel)]="currentSearchTerm"
                     style="padding-right: 32px">
              <nb-icon icon="search-outline" pack="eva"
                       class="position-absolute"
                       (click)="onSearch()"
                       style="top: 25%; right: 8px; cursor: pointer;"></nb-icon>
            </form>

            <button nbButton status="primary" class="mr-3"
                    routerLink="/managements/schedule-and-ticket-prices/round-trip/add">
              Create Round Trip
            </button>
          </div>
    </nb-card-header>

    <nb-card-body style="padding-bottom: 0;">
        <table class="table mb-0 ">
            <thead class="table-borderless">
            <tr>
                <th scope="col" style="width: 5%">#</th>
                <th scope="col">
                    <span (click)="onSort('trainCompanyNameAsc')"
                          [class.text-primary]="currentSort.includes('trainCompanyName')">
                      Train Company Name
                      <nb-icon icon="arrow-down-outline" pack="eva" *ngIf="!sortStates.trainCompanyName"></nb-icon>
                      <nb-icon icon="arrow-up-outline" pack="eva" *ngIf="sortStates.trainCompanyName"></nb-icon>
                    </span>
                </th>
                <th scope="col" style="width: 10%">
                    <span (click)="onSort('discountAsc')"
                          [class.text-primary]="currentSort.includes('discount')">
                      Discount
                      <nb-icon icon="arrow-down-outline" pack="eva" *ngIf="!sortStates.discount"></nb-icon>
                      <nb-icon icon="arrow-up-outline" pack="eva" *ngIf="sortStates.discount"></nb-icon>
                    </span>
                </th>
                <th scope="col" style="width: 15%">
                    <span (click)="onSort('createdAtAsc')"
                          [class.text-primary]="currentSort.includes('createdAt') || currentSort === ''">
                      Created At
                      <nb-icon icon="arrow-down-outline" pack="eva" *ngIf="!sortStates.createdAt"></nb-icon>
                     <nb-icon icon="arrow-up-outline" pack="eva" *ngIf="sortStates.createdAt"></nb-icon>
                    </span>
                  </th>
                <th scope="col" class="text-right" style="width: 15%">Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of roundTrips; let index = index">
                <th scope="row">{{index + 1}}</th>
                <td>{{item.trainCompanyName}}</td>
                <td>{{item.discount | currency}}</td>
                <td>{{item.createdAt | date: 'medium'}}</td>
                <td class="text-right">
                    <button nbButton status="info" class="mr-3" (click)="openShowDialog(item.id)">
                        <nb-icon icon="eye-outline" pack="eva"></nb-icon>
                    </button>
                    <button nbButton status="primary" class="mr-3"
                            routerLink="/managements/schedule-and-ticket-prices/round-trip/{{item.id}}/edit">
                    <nb-icon icon="edit-outline" pack="eva"></nb-icon>
                    </button>
                    <button nbButton status="danger" (click)="openConfirmDialog(item.id, item.trainCompanyName)">
                        <nb-icon icon="trash-outline" pack="eva"></nb-icon>
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
    </nb-card-body>
    <nb-card-footer>
        <app-pagination
          [pagination]="pagination"
          (pageChanged)="onPageChanged($event)"
          (pageSizeChanged)="onPageSizeChanged($event)">
        </app-pagination>
      </nb-card-footer>
</nb-card>
